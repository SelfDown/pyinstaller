<!DOCTYPE html>
<html>
<head>
  <title>test client</title>
  <script src="/static/jquery.js"></script>
  <script src="/static/socket.io.slim.js"></script>
  <script type="text/javascript">//<![CDATA[
  //链接socket,当有第三个参数时，发送采集数据
  var t=''
  var ip ="{{ip}}"
  var port ="{{port}}"
  function connect_websocket(s, url) {
   
    /*创建socket连接*/
    //ws://" + '59.110.16.96:8032' + "/v1/nr8l3plk34xlff320k1ykoty9uf20ihi/view/dms/1503752076
    var socket = io.connect('http://'+ip+':'+port+'/collection')
    socket.on('connect', function() {
       
      $("#messagecontainer").html("socketio open")
    });
    socket.on('reply', function(message) {
        console.log("get message:"+message)
        var html = $("#messagecontainer").html()
        $("#messagecontainer").html(message+"</br></br>"+html)
        
    });
    window.socket = socket
   
  }
  //是否连接,name是
  function is_websocket(id, name) {
    //socket不存在，或者未连接
    if (!window.socket && !window.socket.connected) {
      alert("websocket未连接.");

    }else {
      window.socket.emit('message', $(id).val());
    }
  }
 
  </script>
</head>
<body>
<br>

<h3>Insight Collect 写collect</h3>
<button type="button" onclick="connect_websocket('c','collect')">连接服务(Insight Collect)</button>


<br><br>
service_add_label_position 标牌修改位置
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_add_label_position"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_add_label_position","target_service_name":"service_eam_as_tidwotsk","ID":"test","X":0,"Y":0,"Z":0}}}}'/>
<button type="button" onclick="is_websocket('#service_add_label_position','c')">发送采集数据数据</button>
<br><br>
service_eam_as_tidechder 搜索设备
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_eam_as_tidechder"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"search":"","service":"service_eam_as_tidechder","page":1,"limit":10}}}}'/>
<button type="button" onclick="is_websocket('#service_eam_as_tidechder','c')">发送采集数据数据</button>

<br><br>

service_user_info_setting_set 用户信息设置
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_user_info_setting_set"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_user_info_setting_set","user_id":"test","key":"test","value":"value","settings":{"test":"val"}}}}}'/>
<button type="button" onclick="is_websocket('#service_user_info_setting_set','c')">发送采集数据数据</button>

<br><br>
service_user_info_setting_get 获取用户信息设置
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_user_info_setting_get"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_user_info_setting_get","user_id":"test"}}}}'/>
<button type="button" onclick="is_websocket('#service_user_info_setting_get','c')">发送采集数据数据</button>


<br><br>
service_notes_add 添加批注
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_add_notes"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_notes_add","note":{"TITLE":"TITLE","GUID":"GUID","COLOR":"COLOR","FILE_URL":"FILE_URL","RESOURCE_ID":"RESOURCE_ID","CONTENT":"CONTENT","COMMENT":"COMMENT"}}}}}'/>
<button type="button" onclick="is_websocket('#service_add_notes','c')">发送采集数据数据</button>


<br><br>

service_notes_get 查询批注
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_notes_get"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_notes_get","page":1,"limit":10}}}}'/>
<button type="button" onclick="is_websocket('#service_notes_get','c')">发送采集数据数据</button>

<br><br>

service_notes_get 删除批注
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_notes_delete"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_notes_delete","ID":"2d721330-9c69-11e8-be2f-005056c00008"}}}}'/>
<button type="button" onclick="is_websocket('#service_notes_delete','c')">发送采集数据数据</button>




<br><br>



<br><br>
service_3dmark_add 添加3dmarkup
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_3dmark_add"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_3dmark_add","target_service_name":"service_traffic_monitoring","target_id":"test","stepLength":"t","velocity":"","type":"ss","resource_id":"","model_key":"ss","json_content":"ss","guid":"tset"}}}}'/>
<button type="button" onclick="is_websocket('#service_3dmark_add','c')">发送采集数据数据</button>


<br><br>

service_3dmark_get 查询3D markup
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_3dmark_get"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_3dmark_get","target_service_name":"service_traffic_monitoring","target_id":"test,test2"}}}}'/>
<button type="button" onclick="is_websocket('#service_3dmark_get','c')">发送采集数据数据</button>

<br><br>




service_3dmark_delete 删除3D markup
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_3dmark_delete"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_3dmark_delete","target_service_name":"service_traffic_monitoring","target_id":"test"}}}}'/>
<button type="button" onclick="is_websocket('#service_3dmark_delete','c')">发送采集数据数据</button>

<br><br>





service_pi_data pi数据库
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_pi_data"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_pi_data","tag":"test"}}}}'/>
<button type="button" onclick="is_websocket('#service_pi_data','c')">发送采集数据数据</button>



<br><br>
service_http_avatar_login 登录
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_http_avatar_login"
       value='{"Action": "DataSend", "Data":{"collect":{"T":"S","V":{"service":"service_http_avatar_login","url":"http://localhost:8000/avatar/sys/userrole/loginCheck","method":"post","data":{"userName":"admin","passWord":"123456"}}}}}'/>
<button type="button" onclick="is_websocket('#service_http_avatar_login','c')">发送采集数据数据</button>



<br><br>
service_http_avatar_query 查询数据
<input style="width: 100%; height: 50px; font-size: 20px" type="text" id="service_http_avatar_query"
       value='{"Action":"DataSend","Data":{"collect":{"T":"S","V":{"service":"service_http_avatar_query","url":"http://localhost:8000/avatar/data/queryMetaObjData","metaObjectName":"房间_设备_工单","method":"post","login_Service":"service_http_avatar_login","data":{"orderBy":"","forceFetch":"1","pageNumber":1,"pageSize":1,"filterStr":"{\"ROOM_NUMBER\":\"401\""}}}}}'/>
<button type="button" onclick="is_websocket('#service_http_avatar_query','c')">发送采集数据数据</button>


<h1>Received Messages</h1>
<div id="messagecontainer">

</div>
<script type="text/javascript">
  
</script>
</body>
</html>
